# üê≥ Docker Guide –¥–ª—è WD Block Notificator

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏–ª–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π)

#### Linux / Mac:
```bash
chmod +x docker-restart.sh
./docker-restart.sh
```

#### Windows:
```cmd
docker-restart.bat
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†—É—á–Ω–∞—è —Å–±–æ—Ä–∫–∞ (–µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose down

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –æ–±—Ä–∞–∑
docker rmi wd_block_notificator_app

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –±–µ–∑ –∫—ç—à–∞
docker-compose build --no-cache

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker-compose up -d

# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs -f
```

---

## üîß Â∏∏Â∏∏–∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### Q: –ü–æ—á–µ–º—É "ModuleNotFoundError: No module named 'sentry_sdk'"?

**A:** –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞—Ä–æ–µ Python –æ–∫—Ä—É–∂–µ–Ω–∏–µ.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞
docker-compose down
docker rmi wd_block_notificator_app
docker-compose build --no-cache
docker-compose up -d
```

---

### Q: –ü–æ—á–µ–º—É "SyntaxWarning: invalid escape sequence"?

**A:** –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞ —Å `"\D"` –≤–º–µ—Å—Ç–æ `r"\D"`.

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑
docker-compose build --no-cache
docker-compose up -d
```

---

### Q: –ö–∞–∫ —Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞?

**A:** –ù–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:

```bash
# –†–µ–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ (–∫–∞–∫ –ø–æ—Ç–æ–∫)
docker-compose logs -f

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
docker-compose logs --tail=100

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
docker-compose logs app

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª
docker-compose logs > container_logs.txt
```

---

### Q: –ö–∞–∫ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä?

**A:**
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (–Ω–æ –Ω–µ —É–¥–∞–ª–∏—Ç—å)
docker-compose stop

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å
docker-compose down

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å
docker-compose restart
```

---

### Q: –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å bash –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞?

**A:**
```bash
docker-compose exec app bash

# –ü–æ—Ç–æ–º –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã:
python main.py  # –∏–ª–∏ –ª—é–±—É—é –¥—Ä—É–≥—É—é –∫–æ–º–∞–Ω–¥—É
```

---

### Q: –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å?

**A:**
```bash
# –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏
docker-compose logs -f

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose ps

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# NAME                    STATUS
# wd_block_driver_notificator   Up X seconds
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker

### docker-compose.yml
```yaml
version: '3.8'

services:
  app:
    build: .                    # –°–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑ –∏–∑ Dockerfile
    container_name: wd_block_driver_notificator
    volumes:
      - .:/app                  # –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â—É—é –ø–∞–ø–∫—É –≤ /app –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
    environment:
      - PYTHONUNBUFFERED=1      # –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
      - TZ=Europe/Kiev          # –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞
    restart: always             # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ
```

### Dockerfile
```dockerfile
FROM python:3.12-slim           # –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ —Å Python 3.12
WORKDIR /app                    # –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
COPY requirements.txt .         # –ö–æ–ø–∏—Ä—É–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN pip install ...             # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
COPY . .                        # –ö–æ–ø–∏—Ä—É–µ–º –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
CMD ["python", "main.py"]       # –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞
```

---

## üéØ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã Docker

```
1. docker-compose up -d
   ‚Üì
2. Docker —á–∏—Ç–∞–µ—Ç docker-compose.yml
   ‚Üì
3. Docker —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑ –∏–∑ Dockerfile:
   ‚îú‚îÄ –ó–∞–≥—Ä—É–∂–∞–µ—Ç –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ python:3.12-slim
   ‚îú‚îÄ –ö–æ–ø–∏—Ä—É–µ—Ç requirements.txt
   ‚îú‚îÄ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Python –ø–∞–∫–µ—Ç—ã
   ‚îú‚îÄ –ö–æ–ø–∏—Ä—É–µ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
   ‚îî‚îÄ –ì–æ—Ç–æ–≤–æ!
   ‚Üì
4. Docker –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—Ä–∞–∑–∞
   ‚îú‚îÄ –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â—É—é –ø–∞–ø–∫—É –≤ /app
   ‚îú‚îÄ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
   ‚îî‚îÄ –ó–∞–ø—É—Å–∫–∞–µ—Ç: python main.py
   ‚Üì
5. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å!
   ‚îú‚îÄ –ú–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ Telegram
   ‚îú‚îÄ –ú–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å –ª–æ–≥–∏
   ‚îî‚îÄ –ú–æ–∂–µ—Ç —á–∏—Ç–∞—Ç—å .env —Ñ–∞–π–ª
```

---

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs -f

# 2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—à–∏–±–∫–∏ –≤ main.py
docker-compose exec app python -m py_compile main.py

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ .env —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
docker-compose exec app ls -la | grep env

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –º–æ–¥—É–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
docker-compose exec app python -c "import sentry_sdk; print('OK')"
```

### –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –Ω–æ –ø–æ—Ç–æ–º —É–ø–∞–ª:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ—á–µ–º—É —É–ø–∞–ª
docker-compose logs --tail=50

# –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
# - ModuleNotFoundError: –Ω—É–∂–Ω–∞ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
# - 'NoneType' object is not iterable: –æ—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ
# - No .env file: –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞
```

---

## üìù –¢–∏–ø–∏—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------|----------|
| `docker-compose up -d` | –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ —Ñ–æ–Ω–µ |
| `docker-compose down` | –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä |
| `docker-compose logs -f` | –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |
| `docker-compose restart` | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä |
| `docker-compose ps` | –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| `docker-compose exec app bash` | Bash –æ–±–æ–ª–æ—á–∫–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ |
| `docker-compose build --no-cache` | –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –±–µ–∑ –∫—ç—à–∞ |
| `docker rmi –∏–º—è_–æ–±—Ä–∞–∑–∞` | –£–¥–∞–ª–∏—Ç—å –æ–±—Ä–∞–∑ |

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è Docker –∑–∞–ø—É—Å–∫–∞

- [ ] –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `.env` —Å –≤–∞—à–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ –∏ –ø–∞—Ä–æ–ª—è–º–∏
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker –∏ docker-compose
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω —Ñ–∞–π–ª `docker-restart.sh` (Linux/Mac) –∏–ª–∏ `docker-restart.bat` (Windows)
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `docker-compose build --no-cache`
- [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `docker-compose up -d`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏: `docker-compose logs -f`
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ!

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ production!

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—à–∏–±–∫–µ (restart: always)
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (PYTHONUNBUFFERED=1)
- ‚úÖ –ò–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é –∑–æ–Ω—É (TZ=Europe/Kiev)
- ‚úÖ –ú–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
- ‚úÖ –ú–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å –ª–æ–≥–∏ –≤ —Ñ–∞–π–ª—ã

**–£—Å–ø–µ—Ö–æ–≤! üéâ**
